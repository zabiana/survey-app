import{m as A,p as M,n as O,q as V,j as x,k as z,l as B,Q as G}from"./QSelect.bbff86c1.js";import{c as L,at as R,au as E,h as d,a as v,T as H,g as _,Q as Y,i as D,e as h,b as J,l as K,d as U,av as $,r as P,w as y,o as W,f as X,aw as Z,_ as ee,u as te,v as w,x as ne,y as i,H as f,z as c,N as oe,J as N,I as le,G as T,ap as se,M as F}from"./index.ac38e2b1.js";import"./scroll.66059a0c.js";const ae='<g transform="translate(-20,-20)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="90 50 50" to="0 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g><g transform="translate(20,20) rotate(15 50 50)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="90 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g>';var re=L({name:"QSpinnerGears",props:R,setup(e){const{cSize:t,classes:n}=E(e);return()=>d("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:ae})}}),ie=L({name:"QInnerLoading",props:{...A,...M,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:t}){const n=_(),o=O(e,n.proxy.$q),{transitionProps:l,transitionStyle:a}=V(e),r=v(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(o.value===!0?" q-inner-loading--dark":"")),s=v(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function u(){const m=[d(Y,{size:e.size,color:e.color})];return e.label!==void 0&&m.push(d("div",{class:s.value,style:e.labelStyle},[e.label])),m}function p(){return e.showing===!0?d("div",{class:r.value,style:a.value},t.default!==void 0?t.default():u()):null}return()=>d(H,l.value,p)}}),ce=L({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=_(),o=D(K,h);if(o===h)return console.error("QPage needs to be a deep child of QLayout"),h;if(D(U,h)===h)return console.error("QPage needs to be child of QPageContainer"),h;const a=v(()=>{const s=(o.header.space===!0?o.header.size:0)+(o.footer.space===!0?o.footer.size:0);if(typeof e.styleFn=="function"){const u=o.isContainer.value===!0?o.containerHeight.value:n.screen.height;return e.styleFn(s,u)}return{minHeight:o.isContainer.value===!0?o.containerHeight.value-s+"px":n.screen.height===0?s!==0?`calc(100vh - ${s}px)`:"100vh":n.screen.height-s+"px"}}),r=v(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>d("main",{class:r.value,style:a.value},J(t.default))}});const I="https://www.gstatic.com/charts/loader.js";let C=null;const S=new Map;function ue(){return window.google!==void 0?Promise.resolve(window.google.charts):(C===null&&(C=new Promise(e=>{const t=document.querySelector('script[src="'.concat(I,'"]')),n=t||document.createElement("script");t||(n.src=I,n.type="text/javascript",document.head.append(n)),n.onload=()=>{window.google!==void 0&&e(window.google.charts)}})),C)}async function de(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current",{packages:t=["corechart","controls"],language:n="en",mapsApiKey:o}=arguments.length>1?arguments[1]:void 0;const l=await ue(),a="".concat(e,"_").concat(t.join("_"),"_").concat(n);if(S.has(a))return S.get(a);const r=new Promise(s=>{l.load(e,{packages:t,language:n,mapsApiKey:o}),l.setOnLoadCallback(()=>s(window.google))});return S.set(a,r),r}function he(e,t,n){return e!==null&&t instanceof e.visualization.DataTable||e!==null&&t instanceof e.visualization.DataView?t:e!==null&&Array.isArray(t)?e.visualization.arrayToDataTable(t,n):e!==null&&t!==null&&typeof t=="object"?new e.visualization.DataTable(t):null}function j(e,t,n,o,l,a){const r=(u,p,m)=>{if(m===void 0)throw new Error("please, provide chart type property");return new p.visualization[m](u)};if(e===null)throw new Error("please, provide charts lib property");if(n===null)throw new Error("please, provide chart element property");return t=(a||r)(n,e,o),fe(e,t,l),t}function fe(e,t,n){if(n!==null)for(const[o,l]of Object.entries(n))e!==null&&t!==null&&e.visualization.events.addListener(t,o,l)}function Q(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,n;function o(){return t}return function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];const u=this,p=function(){n=void 0,e.apply(u,r)};n!==void 0&&clearTimeout(n),n=setTimeout(p,o())}}let g=null;const k=$({name:"GChart",props:{type:{type:String,required:!0},data:{type:[Array,Object,null],default:()=>[]},isFirstRowLabels:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},version:{type:String,default:"current"},settings:{type:Object,default:()=>({packages:["corechart","table"]})},events:{type:Object,default:null},createChart:{type:Function,default:void 0},resizeDebounce:{type:Number,default:200}},setup(e,t){let{emit:n}=t;const o=P(null),l=P(null);function a(){if(g===null||o.value===null)return;const r=he(g,e.data,e.isFirstRowLabels);if(r!==null){var s;(s=o.value)===null||s===void 0||s.draw(r,e.options)}}return y(()=>e.data,()=>a(),{deep:!0}),y(()=>e.options,()=>a(),{deep:!0}),y(()=>e.type,()=>{o.value=j(g,o.value,l.value,e.type,e.events,e.createChart),a()}),W(()=>{de(e.version,e.settings).then(r=>{r!==void 0&&(g=r,o.value=j(g,o.value,l.value,e.type,e.events,e.createChart),n("ready",o.value,r),a())}),e.resizeDebounce>0&&window.addEventListener("resize",Q(a,e.resizeDebounce))}),X(()=>{o.value!==null&&typeof o.value.clearChart=="function"&&o.value.clearChart(),e.resizeDebounce>0&&window.removeEventListener("resize",Q(a,e.resizeDebounce))}),()=>d("div",{ref:l},[])}}),q=Z({});function pe(){q.component("GChart",k)}const me={version:"1.1.0",install:pe};let b=null;typeof window!="undefined"&&(b=window.Vue);b!=null&&q.use(me);const ge={components:{GChart:k},data(){return{loading:!1,recordsFound:!0,selectedSchool:null,schoolList:[],displayList:[],chartOptions:{backgroundColor:"transparent",legend:{position:"none"},hAxis:{title:"Students",format:"0"},chartArea:{left:540,top:10,width:"100%"}},chartStyle:"height: calc(70vh)",chartData:[]}},watch:{selectedSchool(){this.loadPollResults()}},methods:{filterSchool(e,t){if(e===""){t(()=>{this.displayList=this.schoolList});return}t(()=>{const n=e.toLowerCase();this.displayList=this.schoolList.filter(o=>o.SchoolName.toLowerCase().indexOf(n)>-1)})},loadPollResults(){this.loading=!0;const e={SchoolID:this.selectedSchool===null?null:this.selectedSchool.SchoolID};fetch("http://localhost:3000/api/results",{method:"POST",headers:{Accept:"application.json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{this.loading=!1,this.recordsFound=t.length>0;let n=[];if(this.selectedSchool===null||this.selectedSchool.SchoolID===null){n.push(["School","Students",{role:"style"}]);for(const o of t)n.push([o.SchoolName,parseInt(o.studentCount),"#009900"]);this.chartData=n}else{n.push(["Job Title","Students",{role:"style"}]);for(const o of t)n.push([o.JobTitle,parseInt(o.studentCount),"#0000FF"]);this.chartData=n}})}},mounted(){fetch("http://localhost:3000/api/school-list").then(e=>e.json()).then(e=>{this.schoolList=[{SchoolID:null,SchoolName:"all NYC schools"}].concat(e),this.displayList=this.schoolList,this.selectedSchool={SchoolID:null,SchoolName:"all NYC schools"}})}},ve={class:"row justify-center"},ye={class:"col-10"},we={key:0},Ce={key:1,style:{width:"100%",height:"300px"},class:"relative-position"};function Se(e,t,n,o,l,a){const r=te("GChart");return w(),ne(ce,null,{default:i(()=>[f("div",ve,[f("div",ye,[t[4]||(t[4]=f("h4",{class:"text-center q-my-md"},"Poll Results",-1)),t[5]||(t[5]=f("p",null,'Select a school to show what jobs students are interested in. Select "all NYC schools" to see how many students/schools have participated.',-1)),c(G,{outlined:"",modelValue:l.selectedSchool,"onUpdate:modelValue":t[0]||(t[0]=s=>l.selectedSchool=s),options:l.displayList,label:"select a NYC high school","option-value":"SchoolID","option-label":"SchoolName","use-input":"","input-debounce":"0",onFilter:a.filterSchool,clearable:"",class:"q-mb-md"},{option:i(s=>[c(x,oe(s.itemProps,{style:{background:"white"}}),{default:i(()=>[c(z,null,{default:i(()=>[c(B,{lines:"1"},{default:i(()=>[N(le(s.opt.SchoolName),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":i(()=>[c(x,null,{default:i(()=>[c(z,{class:"text-grey"},{default:i(()=>t[1]||(t[1]=[N(" No results ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"]),l.recordsFound?(w(),T("div",we,[c(r,{type:"BarChart",data:l.chartData,options:l.chartOptions,style:se(l.chartStyle)},null,8,["data","options","style"]),c(ie,{showing:l.loading},{default:i(()=>[c(re,{size:"50px",color:"primary"}),t[2]||(t[2]=f("h6",{class:"q-ma-none q-mt-md"},"loading data...",-1))]),_:1},8,["showing"])])):F("",!0),l.recordsFound?F("",!0):(w(),T("div",Ce,t[3]||(t[3]=[f("p",{class:"absolute-center text-blue"},"no records found!",-1)])))])])]),_:1})}var ze=ee(ge,[["render",Se]]);export{ze as default};
